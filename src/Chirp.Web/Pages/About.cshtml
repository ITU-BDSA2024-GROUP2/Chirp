@page "/About"
@using Chirp.Core
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Mvc.TagHelpers
@inject SignInManager<Author> SignInManager
@model Chirp.Web.Areas.Identity.Pages.Account.AboutMe.About

@{
    ViewData["Title"] = "About me";
    Layout = "Shared/_Layout";
    var followingCount = @Model.UserInfo["followingCount"];
    var followerCount = @Model.UserInfo["followerCount"];
}

<h3>@ViewData["Title"]</h3>

<ul>
    @{
        <li>Username: @Model.UserInfo["username"]</li>
        @if (Model.UserInfo.ContainsKey("email") && Model.UserInfo["email"] != null)
        {
            <li>Email: @Model.UserInfo["email"]</li>
        }
        <li>Login method: @Model.UserInfo["login"]</li>
    }
</ul>

<div class="followContainer">
    <div>
        <h2>Following (@followingCount)</h2>

        <ul>
            @foreach (var following in Model.Following)
            {
                <li>
                    <strong>
                        <a href="/@following">@following</a>
                    </strong>
                </li>
            }
        </ul>
    </div>

    <div>
        <h2>Followers (@followerCount)</h2>

        <ul>
            @foreach (var follower in Model.Followers)
            {
                <li>
                    <strong>
                        <a href="/@follower">@follower</a>
                    </strong>
                </li>
            }
        </ul>
    </div>
</div>

<div>
    <h2>Your cheeps</h2>
    <ul>
        @foreach (var cheep in Model.Cheeps)
        {
            <li>
                <p>
                    <strong>
                        <a href="/@cheep.Author">@cheep.Author</a>
                    </strong>
                    @cheep.Text
                    <small>&mdash; @cheep.TimeStamp</small>
                </p>
            </li>
        }
    </ul>
</div>